@model PagedList.IPagedList<Models.User>
@using PagedList.Mvc;
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/Layout/_SiteManager.cshtml";

}
@{

    Models.Institute institute_info = null;
    ViewModel.ClassInfo_VM class_info = null;

    if (Session["Class_info"] != null)
    {
        class_info = (ViewModel.ClassInfo_VM)Session["Class_info"];
    }
    if (Session["Institute_info"] != null)
    {
        institute_info = (Models.Institute)Session["Institute_info"];
    }

}
<!--Create Page Here and Footer-->
<div id="main-body" class="col-md-10 col-sm-10 col-xs-10 valign-top display-table-row">
    <div id="content">
        <header>
            <h4 class="choosed-class-name"><i class="far fa-list-alt"></i>&nbsp;لیست همه دانش آموز ها</h4>
            <hr class="line-under-title" />

            <ol class="breadcrumb">
                <li><a href="classes.html">نام مرکز آموزشی</a></li>
                <li><a href="class-info.html">نام کلاس</a></li>
                <li><a href="class-student-list.html">لیست دانش آموز ها</a></li>
            </ol>

        </header>

        <!--Alert Msg-->
        <div class="alert alert-success fade in hidden">
            <a href="#" class="close pull-left" data-dismiss="alert" aria-label="close">&times;</a>
            با موفقیت ثبت گردید!
        </div>

        <div class="alert alert-danger fade in hidden">
            <a href="#" class="close pull-left" data-dismiss="alert" aria-label="close">&times;</a>
            خطا در ثبت اطلاعات
        </div>

        <div class="alert alert-warning fade in hidden">
            <a href="#" class="close pull-left" data-dismiss="alert" aria-label="close">&times;</a>
            ارتباط با سرور قطع شده است!
        </div>

        <!--Search-->
        <div class="row">

            <!--Add Student-->
            <div class="col-md-12">
                <div class="class-action-btn">
                    <a class="btn btn-md btn-default" href="#" data-toggle="modal" data-target="#mymodal" role="button">
                        <span class="fas fa-plus-circle" aria-hidden="true"></span>&nbsp;&nbsp;اضافه کردن دانش آموز
                    </a>
                </div>
            </div><!--End Add Student-->

            <div class="search-top">
                <h5 class="">برای جستجو یکی از کادرهای زیر را پر کنید:</h5>
                <div class="col-md-4">
                    <input type="text" class="input-search-code" placeholder="کد دانش آموزی" />
                </div>
                <div class="col-md-4">
                    <input type="text" class="input-search-meli" placeholder="کد ملی" />
                </div>
                <div class="col-md-4">
                    <input type="text" class="input-search-name" placeholder="نام و نام خانوادگی" />
                </div>
            </div>
        </div>

        <hr class="line-under-title" />

        <!--Table-->
        <div class="table-responsive">
            <table class="table table-striped table-bordered" id="table-student-list">
                <thead>
                    <tr>
                        <th class="text-center" id="th-student-row">ردیف</th>
                        <th class="text-center" id="th-student-picture">عکس</th>
                        <th class="text-center" id="th-student-name">نام</th>
                        <th class="text-center" id="th-student-family">نام خانوادگی</th>
                        <th class="text-center" id="th-student-sex">جنسیت</th>
                        <th class="text-center" id="th-student-code">کد دانش آموزی</th>
                        <th class="text-center" id="th-student-meli-code">کد ملی</th>
                        <th class="text-center" id="th-student-dad-name">نام پدر</th>
                        <th class="text-center" id="th-student-institute">نام مرکز آموزشی</th>
                        <th class="text-center" id="th-student-class">کلاس</th>
                        <th class="text-center" id="th-student-action">عملیات</th>
                    </tr>
                </thead>
                <tbody>
                    @{int counter = 0; }
                    @foreach (var item in Model)
                            {
                                counter++;
                        <tr class="student-info clickable-row" data-href="student-info.html">
                            <td class="text-center td-student-row">@counter</td>
                            <td class="text-center td-student-picture"><img src="../images/User.png" class="img-responsive" alt="user-profile-pic" /></td>
                            <td class="text-center td-student-name">@item.firstname</td>
                            <td class="text-center td-student-family">@item.lastname</td>
                            @if (item.gender == true || item.gender == null)
                            {
                                <td class="text-center td-student-sex">پسر</td>
                            }
                            else
                            {
                                <td class="text-center td-student-sex">دختر</td>
                            }

                            <td class="text-center td-student-code">@item.Student_Code</td>
                            <td class="text-center td-student-meli-code">@item.Code_Melli</td>
                            <td class="text-center td-student-dad-name">@item.Fathername</td>
                            @if (institute_info != null)
                            {
                                <td class="text-center td-student-institute">@institute_info.name</td>
                            }
                            else
                            {
                                <td class="text-center td-student-institute">-</td>
                            }

                            @if (class_info != null)
                            {
                                <td class="text-center td-student-class">@class_info.Name</td>
                            }
                            else
                            {
                                <td class="text-center td-student-class">-</td>
                            }

                            <td class="text-center td-student-action">
                                <a class="btn btn-default btn-xs"><span class="fas fa-pencil-alt"></span>&nbsp;ویرایش</a>
                                <a class="btn btn-danger btn-xs" href="#" data-toggle="modal" data-target="#modal-delete" role="button">
                                    <span class="far fa-trash-alt"></span>&nbsp;حذف
                                </a>
                            </td>
                        </tr>
                    }


                    

                    
                </tbody>
            </table><!--End Table-->

        </div>

        <!-- Modal For Delete Student -->
        <div class="modal fade" id="modal-delete" role="dialog">
            <div class="modal-dialog modal-sm">
                <div class="modal-content">
                    <!--
                     <div class="modal-header">
                     </div> -->
                    <div class="modal-body text-center">
                        <h4>آیا مایل به حذف هستید؟</h4>
                    </div>
                    <div class="modal-footer text-center">
                        <div class="col-md-6">
                            <button type="button" class="btn btn-default" data-dismiss="modal">خیر</button>
                        </div>
                        <div class="col-md-6">
                            <button type="button" class="btn btn-danger" data-send="modal">بله</button>
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <!-- End Modal For Delete Student -->

        <hr class="line-under-title" />
        <!-- Pagination -->
        <div class="row class-paging">
            <div class="col-md-12 text-center">
                <ul class="pagination">
                    @Html.PagedListPager(Model, page => Url.Action("Index", "Student", new { page }), new PagedListRenderOptions { FunctionToTransformEachPageLink = (liTag, aTag) => { aTag.Attributes.Add("data-page-no", aTag.InnerHtml); liTag.InnerHtml = aTag.ToString(); return liTag; } })
                    <li><a href="#">&raquo;</a></li>
                    <li class="active"><a href="#">۱</a></li>
                    <li><a href="#">۲</a></li>
                    <li><a href="#">۳</a></li>
                    <li><a href="#">۴</a></li>
                    <li><a href="#">۵</a></li>
                    <li><a href="#">&laquo;</a></li>
                </ul>
            </div>
        </div> <!-- End Pagination -->
    </div><!--End Container-->
    <!--Footer
    <footer id="admin-footer" class="hidden-xs">
        <div class="row pull-right">
            <p>پیوندیار سیستم</p>
        </div>
    </footer> -->

</div>
<!--End Page Body-->